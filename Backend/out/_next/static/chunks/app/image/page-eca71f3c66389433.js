(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[944],{9806:(e,t,r)=>{Promise.resolve().then(r.bind(r,8335))},6225:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(5155),n=r(2115),s=r(6046),o=r(8173),l=r.n(o),i=r(5565);let c=e=>{let{isAuthenticated:t,displayName:r}=e,o=(0,s.usePathname)(),[c,d]=(0,n.useState)(!1),g=r?r.charAt(0).toUpperCase():"P";return(0,a.jsxs)("nav",{className:"absolute top-0 left-0 w-full bg-white bg-opacity-90 shadow-md px-6 py-4 flex items-center justify-between z-50",children:[(0,a.jsx)(l(),{href:"/",children:(0,a.jsx)(i.default,{src:"/logo.jpg",alt:"Company Logo",width:200,height:80,className:"cursor-pointer"})}),"/login"!==o&&(0,a.jsx)(a.Fragment,{children:t&&(0,a.jsxs)("div",{className:"relative flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>d(e=>!e),className:"focus:outline-none","aria-label":"Toggle navigation menu",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-green-700 hover:text-green-800",fill:"none",stroke:"currentColor",strokeWidth:"3",viewBox:"0 0 20 10",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("polyline",{points:"0,0 10,10 20,0",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,a.jsx)(l(),{href:"/profile",children:(0,a.jsx)("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-green-700 hover:bg-green-800 text-white font-bold",children:g})}),c&&(0,a.jsx)("div",{className:"absolute right-0 top-full mt-2 w-40 bg-white border border-green-700 rounded-md shadow-lg z-50",children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/map",onClick:()=>d(!1),className:"block px-4 py-2 hover:bg-green-100 ".concat("/map"===o?"text-green-600":"text-green-800"),children:"Map"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/about",onClick:()=>d(!1),className:"block px-4 py-2 hover:bg-green-100 ".concat("/about"===o?"text-green-600":"text-green-800"),children:"About"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/image",onClick:()=>d(!1),className:"block px-4 py-2 hover:bg-green-100 ".concat("/image"===o?"text-green-600":"text-green-800"),children:"Image"})})]})})]})})]})}},9839:(e,t,r)=>{"use strict";r.d(t,{j:()=>l});var a=r(9904),n=r(4565),s=r(7058);let o=(0,a.Wp)({apiKey:"AIzaSyBY1AP28wPCEgRLpNw6oAI5Ut3_XTx1a0A",authDomain:"pathpetal-d19a1.firebaseapp.com",projectId:"pathpetal-d19a1",storageBucket:"pathpetal-d19a1.firebasestorage.app",messagingSenderId:"1034300337833",appId:"1:1034300337833:web:e22cf0f6385341382003b8",measurementId:"G-6Y6NB38T0H"}),l=(0,n.xI)(o);(0,s.aU)(o)},8335:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(5155),n=r(2115),s=r(2651),o=r(9839),l=r(6225),i=r(5565);let c=function(){let e=(0,n.useRef)(null),t=(0,n.useRef)(null),[r,c]=(0,n.useState)(""),[d,g]=(0,n.useState)(""),[h,u]=(0,n.useState)(null);return((0,n.useEffect)(()=>{let e=o.j.onAuthStateChanged(e=>{u(e)});return()=>e()},[]),(0,n.useEffect)(()=>{(async function(){try{let t=await navigator.mediaDevices.getUserMedia({video:!0});e.current&&(e.current.srcObject=t)}catch(e){console.error("Error accessing camera:",e),c("Unable to access the camera: "+e)}})()},[]),h&&h.email)?(0,a.jsxs)("div",{className:"min-h-screen relative bg-black",children:[(0,a.jsx)("div",{className:"fixed top-0 left-0 right-0 z-20",children:(0,a.jsx)(l.A,{isAuthenticated:!0,displayName:h?h.displayName||h.email:void 0})}),(0,a.jsxs)("div",{className:"w-full h-screen",children:[(0,a.jsx)("video",{ref:e,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),(0,a.jsx)("canvas",{ref:t,style:{display:"none"}}),r&&(0,a.jsx)("div",{className:"absolute top-16 left-1/2 transform -translate-x-1/2 text-red-600",children:r}),d&&(0,a.jsx)("div",{className:"absolute top-16 left-1/2 transform -translate-x-1/2 text-green-600",children:d}),(0,a.jsx)("button",{onClick:()=>{c(""),g("");let r=e.current,a=t.current;if(!r||!a)return;a.width=r.videoWidth,a.height=r.videoHeight;let n=a.getContext("2d");null==n||n.drawImage(r,0,0,a.width,a.height),navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,r=e.coords.longitude;a.toBlob(e=>{if(!e){c("Error capturing image.");return}let a=new File([e],"capture.png",{type:"image/png"}),n=new FormData;n.append("image",a),n.append("email",h.email),n.append("lat",t.toString()),n.append("lng",r.toString()),s.A.post("".concat("http://127.0.0.1:5000","/create_report"),n,{headers:{"Content-Type":"multipart/form-data"}}).catch(e=>{console.error("Error submitting report:",e),c("Error submitting report: "+e.message)})},"image/png")},e=>{console.error("Error getting geolocation:",e),c("Error obtaining geolocation: "+e.message)}):c("Geolocation is not supported by your browser.")},className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 flex items-center justify-center w-[104px] h-[104px] rounded-full bg-green-700 hover:bg-green-800 shadow-lg",children:(0,a.jsx)(i.default,{src:"/green_camera.png",alt:"Capture Report",width:60,height:60})})]})]}):(0,a.jsx)("p",{children:"Loading user information..."})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,895,996,651,441,517,358],()=>t(9806)),_N_E=e.O()}]);